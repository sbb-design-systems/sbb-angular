<sbb-notification type="info"
  >This example uses a test API key, that might be disabled at any time.</sbb-notification
>
<br />
<br />
<sbb-tab-group>
  <!-- ************************* Basic ************************* -->
  <sbb-tab label="Basic">
    <div class="web-map">
      <sbb-journey-maps [apiKey]="apiKey" language="en"></sbb-journey-maps>
    </div>
    <div>
      <ul>
        <li>
          <small class="font-italic">* Zoom map with scroll wheel or hold to move / pan.</small>
          <br />
          <small class="font-italic">* On a touch device: move / pan map with one finger.</small>
        </li>
      </ul>
    </div>
  </sbb-tab>
  <!-- ************************* Advanced ************************* -->
  <sbb-tab label="Advanced">
    <div class="web-map">
      <sbb-journey-maps
        #advancedMap
        *ngIf="mapVisible"
        language="en"
        [styleOptions]="styleOptions"
        [interactionOptions]="interactionOptions"
        [listenerOptions]="listenerOptions"
        [uiOptions]="uiOptions"
        [viewportOptions]="viewportOptions"
        [apiKey]="apiKey"
        [markerOptions]="markerOptions"
        [markerDetailsTemplate]="markerDetailsTemplate"
        [journeyMapsRoutingOption]="journeyMapsRoutingOption"
        [journeyMapsZones]="journeyMapsZones"
        [(selectedMarkerId)]="selectedMarkerId"
        [(selectedLevel)]="selectedLevel"
        (mapCenterChange)="mapCenterChange.next($event)"
        (zoomLevelsChange)="zoomLevels=$event"
        (visibleLevelsChange)="visibleLevels$.next($event)"
      ></sbb-journey-maps>
      <ng-template #markerDetailsTemplate let-marker>
        <div class="markerdetails-title">{{marker.title}}</div>
        <div class="markerdetails-subtitle">{{marker.subtitle}}</div>
      </ng-template>
      <ng-template #stationTemplate let-station>
        <div class="station-title">{{station.properties.name}}</div>
        <div class="station-subtitle">{{station.properties.sbb_id}}</div>
      </ng-template>
      <ng-template #routeTemplate let-route>
        <div class="route-title">{{route.properties.routeId}}</div>
      </ng-template>
    </div>
    <div>
      <ul>
        <li>
          <sbb-label>Map center: {{mapCenter}}</sbb-label>
        </li>
        <li>
          <sbb-label
            >Map zoom (within range {{zoomLevels?.minZoom}}..{{zoomLevels?.maxZoom}} ):
            {{zoomLevels?.currentZoom}}</sbb-label
          >
        </li>
        <li>
          <sbb-checkbox (change)="mapVisible=!mapVisible" [checked]="mapVisible"
            >Map visibility</sbb-checkbox
          >
        </li>
        <li>
          <sbb-checkbox
            (change)="setShowSmallButtons($event)"
            [checked]="uiOptions.showSmallButtons??false"
            value="smallButtons"
            >Small map controls
          </sbb-checkbox>
        </li>
        <li>
          <sbb-checkbox [checked]="interactionOptions.oneFingerPan??false" disabled
            >Map move / pan with one finger
          </sbb-checkbox>
        </li>
        <li>
          <sbb-checkbox [checked]="interactionOptions.scrollZoom??false" disabled
            >Map zoom with scroll wheel
          </sbb-checkbox>
        </li>
        <li>
          <sbb-label>Switch map to dark mode / bright mode</sbb-label>
          <sbb-radio-group
            class="sbb-checkbox-group-horizontal"
            (change)="setStyleModeInput($event)"
            [selected]="bright"
          >
            <sbb-radio-button #bright value="BRIGHT">Bright Mode</sbb-radio-button>
            <sbb-radio-button value="DARK">Dark Mode</sbb-radio-button>
          </sbb-radio-group>
        </li>
        <li>
          <sbb-label>Zoom map</sbb-label>
          <button sbb-ghost-button (click)="client.zoomIn()">Zoom In</button>
          <button sbb-ghost-button (click)="client.zoomOut()">Zoom Out</button>
        </li>
        <li>
          <sbb-label>Move / pan map</sbb-label>
          <button sbb-ghost-button (click)="client.moveNorth()">North</button>
          <button sbb-ghost-button (click)="client.moveEast()">East</button>
          <button sbb-ghost-button (click)="client.moveSouth()">South</button>
          <button sbb-ghost-button (click)="client.moveWest()">West</button>
        </li>
        <li>
          <div>
            <sbb-label>Map interaction configuration</sbb-label>
            <div class="sbb-checkbox-group-horizontal">
              <sbb-checkbox
                [(ngModel)]="listenerOptions.MARKER.watch"
                (change)="updateListenerOptions()"
                >Marker
              </sbb-checkbox>
              <sbb-checkbox
                [(ngModel)]="listenerOptions.ROUTE.watch"
                (change)="updateListenerOptions()"
                >Route
              </sbb-checkbox>
              <sbb-checkbox
                [(ngModel)]="listenerOptions.STATION.watch"
                (change)="updateListenerOptions()"
                >Station
              </sbb-checkbox>
              <sbb-checkbox
                [(ngModel)]="listenerOptions.ZONE.watch"
                (change)="updateListenerOptions()"
                >Zone
              </sbb-checkbox>
            </div>
          </div>
        </li>
        <li>
          <sbb-label
            >Map markers<span *ngIf="selectedMarkerId">
              (selected: {{selectedMarkerId}})</span
            ></sbb-label
          >
          <button sbb-ghost-button (click)="selectedMarkerId='home'">'Home Office'</button>
          <button sbb-ghost-button (click)="selectedMarkerId=undefined">Unselect all</button>
        </li>
        <li>
          <sbb-label>Map marker info style</sbb-label>
          <sbb-radio-group
            class="sbb-checkbox-group-horizontal"
            (change)="setPopupInput($event)"
            [selected]="popup"
          >
            <sbb-radio-button #popup value="true">Popup</sbb-radio-button>
            <sbb-radio-button value="false">Teaser</sbb-radio-button>
          </sbb-radio-group>
        </li>
        <li>
          <sbb-label>Select zones</sbb-label>
          <select sbbInput (change)="setJourneyMapsZoneInput($event)">
            <option value="" (change)="setJourneyMapsZoneInput($event)">(none)</option>
            <option *ngFor="let input of journeyMapsZoneOptions" [value]="input">{{input}}</option>
          </select>
        </li>
        <li>
          <sbb-label>Select a journey</sbb-label>
          <select class="select-journey" sbbInput (change)="setJourneyMapsRoutingInput($event)">
            <option value="" (change)="setJourneyMapsRoutingInput($event)">(none)</option>
            <option *ngFor="let input of journeyMapsRoutingOptions" [value]="input">
              {{input}}
            </option>
          </select>
        </li>
        <li *ngIf="visibleLevels$ | async as visibleLevels">
          <sbb-notification *ngIf="!visibleLevels.length" type="info"
            >No indoor data visible in map</sbb-notification
          >
          <div *ngIf="visibleLevels.length">
            <sbb-label>Select indoor level</sbb-label>
            <ng-container *ngFor="let level of visibleLevels">
              <button
                sbb-icon-button
                [disabled]="level === selectedLevel"
                (click)="setSelectedLevel(level)"
              >
                Level {{level}}
              </button>
            </ng-container>
          </div>
        </li>
      </ul>
    </div>
  </sbb-tab>
</sbb-tab-group>
